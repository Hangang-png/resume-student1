<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <title>ç®€å†ç”Ÿæˆå™¨</title>
  <link rel="stylesheet" type="text/css" href="index.css" />
  <script src="https://unpkg.com/pdf-lib@1.17.1/dist/pdf-lib.min.js"></script>
  <script src="https://unpkg.com/@pdf-lib/fontkit@0.0.4/dist/fontkit.umd.min.js"></script>
  <style>
    body { font-family: sans-serif; margin: 40px; }
    button { padding: 10px 20px; font-size: 16px; }
  </style>
</head>
<body>
  
<!-- é¡¶éƒ¨ Banner -->
  <div class="banner fade-in">
    <div class="avatar">
      <img src="female.jpeg" alt="Mariaå¤´åƒ" />
    </div>
    <div class="info">
      <h1 id="hName">Maria Rossi</h1>
      <h2>.NET å·¥ç¨‹å¸ˆ</h2>
      <p>æ°¸è¿œå‘å‰</p>
      <div class="contact">
        ğŸ“ å¤šä¼¦å¤š ï½œ â˜  437-477-6689
      </div>
    </div>
  </div>

  <!-- æŠ€èƒ½ -->
  <div class="section fade-in-delay">
    <h3>æŠ€èƒ½ä¸“é•¿</h3>
    <ul>
      <li><span class="highlight">è¯­è¨€ï¼š</span>C#, JavaScript, SQL, Python</li>
      <li><span class="highlight">æ¡†æ¶ï¼š</span>.NET Core, ASP.NET, WPF</li>
      <li><span class="highlight">å‰ç«¯ï¼š</span>HTML5, CSS3, Vue.js</li>
      <li><span class="highlight">æ•°æ®åº“ï¼š</span>SQL Server, MySQL</li>
      <li><span class="highlight">å·¥å…·ï¼š</span>Visual Studio, Git, Docker</li>
    </ul>
  </div>

  <!-- é¡¹ç›®ç»éªŒ -->
  <div class="section fade-in-delay" style="animation-delay: 0.8s;">
    <h3>é¡¹ç›®ç»éªŒ</h3>
    
    <p>
      ä¼ä¸šäººäº‹ç®¡ç†ç³»ç»Ÿ</strong> - ä½¿ç”¨ WPF + .NET Core æ„å»ºï¼Œæ”¯æŒå‘˜å·¥ä¿¡æ¯ç®¡ç†ã€æƒé™åˆ†é…ã€å·¥èµ„è®¡ç®—ç­‰ã€‚
      çº¿ä¸Šå•†åŸåå°ç®¡ç†å¹³å°</strong> - ä½¿ç”¨ ASP.NET MVC + Vue å‰åç«¯åˆ†ç¦»ï¼Œå®ç°è®¢å•ã€åº“å­˜ã€ç”¨æˆ·ç­‰æ¨¡å—ã€‚
    </p>

  </div>

  <!-- æ•™è‚²èƒŒæ™¯ -->
  <div class="section1 fade-in-delay" style="animation-delay: 1.1s;">
    <h3>æ•™è‚²èƒŒæ™¯</h3>
    <ul>
      <li>åŒ—äº¬å¤§å­¦ ï½œ è‡ªåŠ¨åŒ–ä¸è®¡ç®—æœºä¸“ä¸š ï½œ å­¦å£«</li>
      <li>æ¸…åå¤§å­¦ ï½œ è‡ªåŠ¨åŒ–ä¸è®¡ç®—æœºä¸“ä¸š ï½œ ç¡•å£«</li>
    </ul>
  </div>

  <!-- è‡ªæˆ‘è¯„ä»· -->
  <div class="section1 fade-in-delay" style="animation-delay: 1.4s;">
    <h3>è‡ªæˆ‘è¯„ä»·</h3>
    <p>
      çƒ­çˆ±ç¼–ç¨‹ï¼Œæ³¨é‡ä»£ç è´¨é‡ï¼Œå…·å¤‡è‰¯å¥½çš„å­¦ä¹ èƒ½åŠ›ä¸æ²Ÿé€šåä½œèƒ½åŠ›ã€‚
      å…³æ³¨æŠ€æœ¯è¶‹åŠ¿ï¼ŒæŒç»­æå‡è‡ªæˆ‘ï¼Œç§‰æŒâ€œæ°¸è¿œå‘å‰â€çš„ä¿¡å¿µé¢å¯¹æ¯ä¸€ä¸ªé¡¹ç›®ä¸æŒ‘æˆ˜ã€‚
    </p>
  </div>

  <!-- åº•éƒ¨ -->
  <footer class="footer fade-in-delay" style="animation-delay: 1.7s;">
    <p>Â© 2025 Maria. All rights reserved.</p>

    <button onclick="generatePDF()">ä¸‹è½½ PDF ç®€å† ğŸ“„</button>

  <script>
    async function generatePDF() {
  const { PDFDocument, rgb, PageSizes } = PDFLib;
  const pdfDoc = await PDFDocument.create();
  pdfDoc.registerFontkit(fontkit);
  const fontBytes = await fetch('SIMHEI.TTF').then(res => res.arrayBuffer());
  const customFont = await pdfDoc.embedFont(fontBytes);
  const page = pdfDoc.addPage(PageSizes.A4);
  //const { width, height } = page.getSize();
  
  // è·å–é¡µé¢å°ºå¯¸
  const { width, height } = page.getSize();
  
  // è®¾ç½®è¾¹è·ï¼ˆä¾‹å¦‚è¾¹æ¡†è·ç¦»é¡µé¢è¾¹ç¼˜10ä¸ªå•ä½ï¼‰
  const margin = 30;
  
  // ç»˜åˆ¶çŸ©å½¢ä½œä¸ºè¾¹æ¡†
  page.drawRectangle({
    x: margin,
    y: margin,
    width: width - 2 * margin,
    height: height - 2 * margin,
    borderColor: rgb(0, 0, 0),  // é»‘è‰²è¾¹æ¡†
    borderWidth: 1,
  });
  
  let y = height - 40;
  
  // 1. è·å–å›¾åƒæ•°æ®
  const imageBytes = await fetch('female.jpeg').then(res => res.arrayBuffer());
  
  // 2. åµŒå…¥å›¾åƒ
  const image = await pdfDoc.embedJpg(imageBytes); // å¦‚æœæ˜¯ PNG å›¾åƒï¼Œä½¿ç”¨ embedPng
  
  // 3. è·å–å›¾åƒå°ºå¯¸å¹¶ç¼©æ”¾
  const imageDims = image.scale(0.1); // ç¼©æ”¾å›¾åƒä¸ºåŸå§‹å°ºå¯¸çš„ 50%
  // 4. ç»˜åˆ¶å›¾åƒ
  page.drawImage(image, {
    x: 70, // X è½´ä½ç½®
    y: y - imageDims.height, // Y è½´ä½ç½®ï¼Œç¡®ä¿å›¾åƒä¸ä¼šè¦†ç›–ä¹‹å‰çš„å†…å®¹
    width: imageDims.width,
    height: imageDims.height,
  });
  
  // æ›´æ–° Y è½´ä½ç½®ï¼Œä»¥ä¾¿åç»­å†…å®¹ä¸ä¼šè¦†ç›–å›¾åƒ 

  const name = document.getElementById('hName').innerText || 'å§“å';
  const titleFontSize = 32;
  const textWidth = customFont.widthOfTextAtSize(name, titleFontSize);
  const centerX = (width - textWidth) / 2;
  page.drawText(name, { x: centerX, y: y-75, size: titleFontSize, font: customFont, color: rgb(0, 0, 0.8) });
  y -= 50;

 y -= imageDims.height + 20;

  // åŠ¨æ€è¯»å–é¡µé¢å†…å®¹
  const skillItems = document.querySelectorAll('.section ul:nth-of-type(1) li');
  const skills = Array.from(skillItems).map(li => li.innerText);  

  const educationItems = document.querySelectorAll('.section1 ul:nth-of-type(1) li');
  const education = Array.from(educationItems).map(li => li.innerText);

  const selfIntro1 = document.querySelector('.section1 p').innerText;

  const selfIntro = document.querySelector('.section p').innerText;  
  

  // ç»˜åˆ¶å†…å®¹
  page.drawText('æŠ€èƒ½ä¸“é•¿', { x: 50, y: y, size: 20, font: customFont, color: rgb(0, 0.5, 0) });
  y -= 30;
  skills.forEach(skill => {
    page.drawText('â€¢ ' + skill, { x: 60, y: y, size: 14, font: customFont, color: rgb(0, 0, 0) });
    y -= 40;
  });

  page.drawText('é¡¹ç›®ç»éªŒ', { x: 50, y: y, size: 20, font: customFont, color: rgb(0.5, 0.2, 0) });
  y -= 30;
  y = drawMultilineText(selfIntro, 480, 14, 60, y);
  y-=20;

  page.drawText('æ•™è‚²èƒŒæ™¯', { x: 50, y: y, size: 20, font: customFont, color: rgb(0.3, 0, 0.5) });
  y -= 30;
  education.forEach(line => {
    page.drawText('â€¢ ' + line, { x: 60, y: y, size: 14, font: customFont, color: rgb(0, 0, 0) });
    y -= 40;
  });

  page.drawText('è‡ªæˆ‘è¯„ä»·', { x: 50, y: y, size: 20, font: customFont, color: rgb(0.5, 0.2, 0) });
  y -= 30;
  y = drawMultilineText(selfIntro1, 480, 14, 60, y);
  
  const pdfBytes = await pdfDoc.save();
  const blob = new Blob([pdfBytes], { type: 'application/pdf' });
  const link = document.createElement('a');
  link.href = URL.createObjectURL(blob);
  link.download = 'ç®€å†_Maria.pdf';
  link.click();

  function drawMultilineText(text, maxWidth, fontSize, xStart, yStart) {
    const words = text.split('');
    let line = '';
    let y = yStart;
    for (let i = 0; i < words.length; i++) {
      const testLine = line + words[i];
      const testWidth = customFont.widthOfTextAtSize(testLine, fontSize);
      if (testWidth > maxWidth) {
        page.drawText(line, { x: xStart, y: y, size: fontSize, font: customFont, color: rgb(0, 0, 0) });
        y -= fontSize + 6;
        line = words[i];
      } else {
        line = testLine;
      }
    }
    if (line) {
      page.drawText(line, { x: xStart, y: y, size: fontSize, font: customFont, color: rgb(0, 0, 0) });
      y -= fontSize + 6;
    }
    return y;
  }
}
  </script>
</body>
</html>
